<!DOCTYPE html>
<html>
	<head>
		<title>index</title>
	</head>
	<body>
		<div>
			<div id="messageBox"></div>
			<input type="text" id="messageInput">
			<button id="sendButton">send</button>
			<button id="fetchButton">fetch</button>
		</div>
		<script>
			var sendButton = document.getElementById("sendButton");
			var fetchButton = document.getElementById("fetchButton");
			var messageInput = document.getElementById("messageInput");
			var messageBox = document.getElementById("messageBox");

			sendButton.addEventListener("click", function(e){
				var ajax = new XMLHttpRequest();
				ajax.addEventListener("readystatechange", function(){
					if(ajax.readyState === XMLHttpRequest.DONE){
						if(ajax.status === 200){
							console.log(ajax.responseText);
						}
					}
				});
				ajax.open("POST", "/api/chat");
				ajax.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
				ajax.send("msg=" + encodeURIComponent(messageInput.value));
			});

			fetchButton.addEventListener("click", function(){
				var ajax = new XMLHttpRequest();
				ajax.addEventListener("load", function(){
					console.log(JSON.parse(ajax.responseText));
				});
				ajax.open("GET", "/api/chat");
				ajax.send();
			});
		</script>
	</body>
</html>
